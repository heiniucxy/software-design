## 项目风格

### RESTful

REST是*Representational State Transfer*(在表现层上的状态转化)的缩写，这个词的意思要在文章的后面才能解释清楚。REST是一种WEB应用的架构风格，[它被定义为6个限制](https://link.jianshu.com?t=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FRepresentational_state_transfer%23Architectural_constraints)，满足这6个限制，能够获得诸多优点（详细优点在文章最后总结）。

先用一句话来概括RESTful **API**(具有REST风格的API): **用URL定位资源，用HTTP动词（GET,HEAD,POST,PUT,PATCH,DELETE）描述操作，用状态码表示操作结果。**

RESTful API有助于客户端和服务端的功能分离，服务器完全扮演着一个“资源服务商”的角色。各种不同的客户端都可以通过同一套API与这个“资源服务商”交流，从而与资源进行互动。

![REST架构图](https://chars.tech/assets/images/tech/restful-api-go-REST-struct.png)

REST的规则概括起来有以下五个方面：

1. 以资源为核心

什么是资源？在web应用中，什么都是资源（或者抽象成资源）。资源可以是一个实体，也可以是一个过程，或者也可以是一个版本。比如，商品是资源，库存是资源，价格是资源等等。

REST没有“服务”概念，那是SOA的事情。

2. 每个资源分配唯一一个URL

每一个资源一个URL，而且是唯一的URL，比如我们使用http://www.haodaquan.com/v0/product 这个URL标识商品资源。

3. 通过标准的HTTP（HTTPS）方法操作资源。

操作（调用）资源使用HTTP中的标准方法，比如常见的GET（获取资源），POST（存储资源），PUT（重置资源），PATCH（局部更新资源）、DELET（删除资源），也可能会有HEADER和OPTIONS方法。

4. 资源的表现层可以是xml、json或者其他

这里是指调用资源后返回的数据格式，一般以JSON和XML居多，特别json格式可以直接被js使用，爽的很，经常被使用。

5. 操作是无状态的

REST架构是不存储调用者的状态的。换句话说，比如登陆才能调用资源，你可别指望登陆这个状态让REST服务帮你存储。换句话说，业务层的活，REST不干。

遵守REST规则，可以让架构变得轻便，简单，安全性和可靠性高，更重要的是扩展性好。当然，利用应用程序的多层架构可是实现更高的重用性、安全性和扩展性。有了 REST 服务，前端关注界面展现，后端关注业务逻辑，分工明确，职责清晰。

从面向实用的角度来看，REST 架构风格可以为 Web 开发者带来三方面的利益：

- 简单性

采用 REST 架构风格，对于开发、测试、运维人员来说，都会更简单。可以充分利用大量 HTTP 服务器端和客户端开发库、Web 功能测试 / 性能测试工具、HTTP 缓存、HTTP 代理服务器、防火墙。这些开发库和基础设施早已成为了日常用品，不需要什么火箭科技（例如神奇昂贵的应用服务器、中间件）就能解决大多数可伸缩性方面的问题。

- 可伸缩性

充分利用好通信链各个位置的 HTTP 缓存组件，可以带来更好的可伸缩性。其实很多时候，在 Web 前端做性能优化，产生的效果不亚于仅仅在服务器端做性能优化，但是 HTTP 协议层面的缓存常常被一些资深的架构师完全忽略掉。

![REST 的扩展性](https://chars.tech/assets/images/tech/restful-api-go-REST-extern.png)

- 松耦合

统一接口 + 超文本驱动，带来了最大限度的松耦合。允许服务器端和客户端程序在很大范围内，相对独立地进化。对于设计面向企业内网的 API 来说，松耦合并不是一个很重要的设计关注点。但是对于设计面向互联网的 API 来说，松耦合变成了一个必选项，不仅在设计时应该关注，而且应该放在最优先位置。
